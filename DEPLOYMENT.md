# éƒ¨ç½²èªªæ˜æ–‡ä»¶ (Deployment Guide)

## ğŸ“‹ ç³»çµ±è³‡è¨Š

- **å…§ç¶² IP**: 10.248.226.81
- **å‰ç«¯ Port**: 3000
- **å¾Œç«¯ Port**: 5000
- **è³‡æ–™åº«**: SQLite3 (server/db/)

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æ­¥é©Ÿ

### é¦–æ¬¡éƒ¨ç½²

1. **å®‰è£æ‰€æœ‰ä¾è³´**
   ```bash
   npm run install:all
   ```

2. **å®‰è£ serve å¥—ä»¶ (ç”¨æ–¼æœå‹™å‰ç«¯)**
   ```bash
   cd client && npm install serve && cd ..
   ```

3. **åˆå§‹åŒ–è³‡æ–™åº«**
   ```bash
   cd server && npm run init-db && cd ..
   ```

4. **æ§‹å»ºå‰ç«¯æ‡‰ç”¨**
   ```bash
   ./build.sh
   ```

5. **å•Ÿå‹•æœå‹™**
   ```bash
   ./start_prod.sh
   ```

### æ—¥å¸¸æ“ä½œ

#### å•Ÿå‹•æœå‹™
```bash
./start_prod.sh
```

#### åœæ­¢æœå‹™
```bash
./stop.sh
```

#### æŸ¥çœ‹ç‹€æ…‹
```bash
./status.sh
```

#### æŸ¥çœ‹æ—¥èªŒ
```bash
# å¾Œç«¯æ—¥èªŒ
tail -f logs/backend.log

# å‰ç«¯æ—¥èªŒ
tail -f logs/frontend.log
```

## ğŸŒ è¨ªå•åœ°å€

### æœ¬åœ°è¨ªå•ï¼ˆåœ¨ä¼ºæœå™¨ä¸Šï¼‰
- å‰ç«¯: http://localhost:3000
- å¾Œç«¯ API: http://localhost:5000/api

### å…§ç¶²è¨ªå•ï¼ˆå±€åŸŸç¶²å…§å…¶ä»–é›»è…¦ï¼‰
- **å‰ç«¯**: http://10.248.226.81:3000
- **å¾Œç«¯ API**: http://10.248.226.81:5000/api
- **å¥åº·æª¢æŸ¥**: http://10.248.226.81:5000/api/health

## ğŸ‘¥ é è¨­å¸³è™Ÿ

### æ•™å¸«å¸³è™Ÿ
- **å¸³è™Ÿ**: teacher
- **å¯†ç¢¼**: teacher123

### å­¸ç”Ÿ
- ç„¡éœ€å¯†ç¢¼ï¼Œç›´æ¥è¼¸å…¥åå­—å³å¯é€²å…¥

## ğŸ”§ é…ç½®æ–‡ä»¶èªªæ˜

### å¾Œç«¯é…ç½® (`server/.env.production`)
```env
PORT=5000
JWT_SECRET=eng-test-production-secret-key-2026
NODE_ENV=production
HOST=0.0.0.0
```

### å‰ç«¯é…ç½® (`client/.env.production`)
```env
REACT_APP_API_URL=http://10.248.226.81:5000
```

## ğŸ“ é‡è¦æ–‡ä»¶ä½ç½®

```
eng-test/
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ .env.production      # å¾Œç«¯ç”Ÿç”¢ç’°å¢ƒé…ç½®
â”‚   â”œâ”€â”€ db/                  # SQLite è³‡æ–™åº«ç›®éŒ„
â”‚   â””â”€â”€ index.js             # å¾Œç«¯å…¥å£æ–‡ä»¶
â”œâ”€â”€ client/
â”‚   â”œâ”€â”€ .env.production      # å‰ç«¯ç”Ÿç”¢ç’°å¢ƒé…ç½®
â”‚   â”œâ”€â”€ build/               # å‰ç«¯æ§‹å»ºç”¢ç‰©
â”‚   â””â”€â”€ src/                 # å‰ç«¯æºç¢¼
â”œâ”€â”€ logs/
â”‚   â”œâ”€â”€ backend.log          # å¾Œç«¯æ—¥èªŒ
â”‚   â”œâ”€â”€ backend.pid          # å¾Œç«¯é€²ç¨‹ ID
â”‚   â”œâ”€â”€ frontend.log         # å‰ç«¯æ—¥èªŒ
â”‚   â””â”€â”€ frontend.pid         # å‰ç«¯é€²ç¨‹ ID
â”œâ”€â”€ start_prod.sh            # å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ stop.sh                  # åœæ­¢è…³æœ¬
â”œâ”€â”€ status.sh                # ç‹€æ…‹æª¢æŸ¥è…³æœ¬
â””â”€â”€ build.sh                 # å‰ç«¯æ§‹å»ºè…³æœ¬
```

## ğŸ”¥ é˜²ç«ç‰†è¨­ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœå…¶ä»–é›»è…¦ç„¡æ³•è¨ªå•ï¼Œå¯èƒ½éœ€è¦é–‹æ”¾é˜²ç«ç‰†ç«¯å£ï¼š

```bash
# CentOS/RHEL/Rocky Linux
sudo firewall-cmd --permanent --add-port=3000/tcp
sudo firewall-cmd --permanent --add-port=5000/tcp
sudo firewall-cmd --reload

# Ubuntu/Debian
sudo ufw allow 3000/tcp
sudo ufw allow 5000/tcp
sudo ufw reload
```

## ğŸ› æ•…éšœæ’é™¤

### å•é¡Œï¼šç«¯å£å·²è¢«ä½”ç”¨
```bash
# æŸ¥çœ‹ä½”ç”¨ç«¯å£çš„é€²ç¨‹
lsof -i :3000
lsof -i :5000

# åœæ­¢æœå‹™
./stop.sh
```

### å•é¡Œï¼šå…¶ä»–é›»è…¦ç„¡æ³•è¨ªå•
1. æª¢æŸ¥é˜²ç«ç‰†è¨­ç½®
2. ç¢ºèª IP åœ°å€æ­£ç¢º
3. ç¢ºèªæœå‹™æ­£åœ¨é‹è¡Œï¼š`./status.sh`

### å•é¡Œï¼šå¾Œç«¯é€£æ¥å¤±æ•—
1. æª¢æŸ¥å¾Œç«¯æ—¥èªŒï¼š`tail -f logs/backend.log`
2. æ¸¬è©¦å¾Œç«¯å¥åº·æª¢æŸ¥ï¼š`curl http://10.248.226.81:5000/api/health`

### å•é¡Œï¼šå‰ç«¯é¡¯ç¤ºéŒ¯èª¤
1. æª¢æŸ¥å‰ç«¯æ—¥èªŒï¼š`tail -f logs/frontend.log`
2. é‡æ–°æ§‹å»ºå‰ç«¯ï¼š`./build.sh`
3. æ¸…é™¤ç€è¦½å™¨å¿«å–

## ğŸ”„ æ›´æ–°éƒ¨ç½²

ç•¶ç¨‹å¼ç¢¼æœ‰æ›´æ–°æ™‚ï¼š

```bash
# 1. åœæ­¢æœå‹™
./stop.sh

# 2. æ›´æ–°ä»£ç¢¼
git pull  # å¦‚æœä½¿ç”¨ git

# 3. é‡æ–°å®‰è£ä¾è³´ï¼ˆå¦‚æœ‰è®Šæ›´ï¼‰
npm run install:all

# 4. é‡æ–°æ§‹å»ºå‰ç«¯
./build.sh

# 5. å•Ÿå‹•æœå‹™
./start_prod.sh
```

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹è¯ç¹«ç³»çµ±ç®¡ç†å“¡æˆ–æŸ¥çœ‹ï¼š
- å¾Œç«¯æ—¥èªŒ: `logs/backend.log`
- å‰ç«¯æ—¥èªŒ: `logs/frontend.log`
- ç³»çµ±ç‹€æ…‹: `./status.sh`

---

**æœ€å¾Œæ›´æ–°**: 2026-02-25
**ç¶­è­·è€…**: Jack_CC_Lee
